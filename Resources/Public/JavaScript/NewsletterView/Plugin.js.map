{"version":3,"sources":["webpack:///webpack/bootstrap 9505c3153781d0b81a41","webpack:///./src/index.js","webpack:///./src/manifest.js","webpack:///./~/@neos-project/neos-ui-extensibility/src/index.js","webpack:///./~/@neos-project/neos-ui-extensibility/src/createConsumerApi.js","webpack:///./~/@neos-project/neos-ui-extensibility/package.json","webpack:///./~/@neos-project/neos-ui-extensibility/src/manifest.js","webpack:///./~/@neos-project/neos-ui-extensibility/src/readFromConsumerApi.js","webpack:///./src/NewsletterView.js","webpack:///./~/@neos-project/neos-ui-extensibility/src/shims/vendor/react/index.js","webpack:///./~/@neos-project/neos-ui-extensibility/src/shims/vendor/prop-types/index.js","webpack:///./~/@neos-project/neos-ui-extensibility/src/shims/neosProjectPackages/react-ui-components/index.js","webpack:///./~/@neos-project/neos-ui-extensibility/src/shims/vendor/react-redux/index.js","webpack:///./~/@neos-project/neos-ui-extensibility/src/shims/neosProjectPackages/neos-ui-redux-store/index.js","webpack:///./~/@neos-project/neos-ui-extensibility/src/shims/neosProjectPackages/neos-ui-decorators/index.js","webpack:///./~/@neos-project/neos-ui-extensibility/src/shims/vendor/plow-js/index.js","webpack:///./src/TestConfirmationDialog.js","webpack:///./src/ConfirmationDialog.js"],"names":["require","viewsRegistry","globalRegistry","get","set","component","createConsumerApi","createReadOnlyValue","value","writable","enumerable","configurable","manifests","exposureMap","api","Object","keys","forEach","defineProperty","key","window","manifest","identifier","options","bootstrap","push","readFromConsumerApi","Error","fetchSubscriptions","fetch","nodeType","credentials","then","response","json","sendNewsletter","focusedNodeContextPath","subscription","isTest","email","dataSourceAdditionalArguments","sendEndpointUrl","csrfToken","document","getElementById","dataset","data","URLSearchParams","replace","pair","option","method","body","NewsletterView","i18nRegistry","CR","Nodes","focusedNodePathSelector","state","getNodeByContextPath","nodeByContextPath","props","subscriptions","selectedSubscription","confirmationDialogIsOpen","testConfirmationDialogIsOpen","isError","isSent","selectSubscription","bind","sendTestNewsletter","toggleConfirmationDialog","toggleTestConfirmationDialog","node","setState","isOpen","status","catch","translate","marginTop","color","propTypes","string","func","isRequired","module","exports","React","PropTypes","ReactUiComponents","reactRedux","NeosUiReduxStore","NeosUiDecorators","plow","TestConfirmationDialog","close","send","includes","padding","bool","ConfirmationDialog","isLoading","subscribers","prevProps","fetchPreview","toString","length","map","subscriber","object"],"mappings":"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","file":"Plugin.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 9505c3153781d0b81a41","require('./manifest');\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","import manifest from '@neos-project/neos-ui-extensibility';\nimport NewsletterView from './NewsletterView';\n\nmanifest('Psmb.Newsletter:NewsletterView', {}, globalRegistry => {\n    const viewsRegistry = globalRegistry.get('inspector').get('views');\n\n    viewsRegistry.set('Psmb.Newsletter/Views/NewsletterView', {\n        component: NewsletterView\n    });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/manifest.js","import createConsumerApi from './createConsumerApi';\nimport readFromConsumerApi from './readFromConsumerApi';\n\nexport default readFromConsumerApi('manifest');\n\nexport {\n    createConsumerApi\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/@neos-project/neos-ui-extensibility/src/index.js","import {version} from '../package.json';\nimport createManifestFunction from './manifest';\n\nconst createReadOnlyValue = value => ({\n    value,\n    writable: false,\n    enumerable: false,\n    configurable: true\n});\n\nexport default function createConsumerApi(manifests, exposureMap) {\n    const api = {};\n\n    Object.keys(exposureMap).forEach(key => {\n        Object.defineProperty(api, key, createReadOnlyValue(exposureMap[key]));\n    });\n\n    Object.defineProperty(api, '@manifest', createReadOnlyValue(\n        createManifestFunction(manifests)\n    ));\n\n    Object.defineProperty(window, '@Neos:HostPluginAPI', createReadOnlyValue(api));\n    Object.defineProperty(window['@Neos:HostPluginAPI'], 'VERSION', createReadOnlyValue(version));\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/@neos-project/neos-ui-extensibility/src/createConsumerApi.js","module.exports = {\"name\":\"@neos-project/neos-ui-extensibility\",\"version\":\"1.0.0-beta8\",\"description\":\"Extensibility mechanisms for the Neos CMS UI\",\"main\":\"./src/index.js\",\"scripts\":{\"prebuild\":\"check-dependencies && yarn clean\",\"test\":\"yarn jest\",\"test:watch\":\"yarn jest -- --watch\",\"build\":\"exit 0\",\"build:watch\":\"exit 0\",\"clean\":\"rimraf ./lib ./dist\",\"lint\":\"eslint src\",\"jest\":\"PWD=$(pwd) NODE_ENV=test jest -w 1 --coverage\"},\"dependencies\":{\"@neos-project/build-essentials\":\"1.0.0-beta8\",\"@neos-project/positional-array-sorter\":\"1.0.0-beta8\",\"babel-core\":\"^6.13.2\",\"babel-eslint\":\"^7.1.1\",\"babel-loader\":\"^6.2.4\",\"babel-plugin-transform-decorators-legacy\":\"^1.3.4\",\"babel-plugin-transform-object-rest-spread\":\"^6.20.1\",\"babel-plugin-webpack-alias\":\"^2.1.1\",\"babel-preset-es2015\":\"^6.13.2\",\"babel-preset-react\":\"^6.3.13\",\"babel-preset-stage-0\":\"^6.3.13\",\"chalk\":\"^1.1.3\",\"css-loader\":\"^0.26.0\",\"file-loader\":\"^0.10.0\",\"json-loader\":\"^0.5.4\",\"postcss-loader\":\"^1.0.0\",\"react-dev-utils\":\"^0.5.0\",\"style-loader\":\"^0.13.1\"},\"bin\":{\"neos-react-scripts\":\"./bin/neos-react-scripts.js\"},\"jest\":{\"transformIgnorePatterns\":[],\"setupFiles\":[\"./node_modules/@neos-project/build-essentials/src/setup-browser-env.js\",\"./node_modules/@neos-project/build-essentials/src/enzymeConfiguration.js\"],\"transform\":{\"neos-ui-extensibility/src/.+\\\\.jsx?$\":\"./node_modules/.bin/babel-jest\",\"node_modules/@neos-project/.+\\\\.jsx?$\":\"./node_modules/.bin/babel-jest\"}}}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/@neos-project/neos-ui-extensibility/package.json\n// module id = 4\n// module chunks = 0","export default manifests => {\n    return function manifest(identifier, options, bootstrap) {\n        manifests.push({\n            [identifier]: {\n                options,\n                bootstrap\n            }\n        });\n    };\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/@neos-project/neos-ui-extensibility/src/manifest.js","export default function readFromConsumerApi(key) {\n    return (...args) => {\n        if (window['@Neos:HostPluginAPI'] && window['@Neos:HostPluginAPI'][`@${key}`]) {\n            return window['@Neos:HostPluginAPI'][`@${key}`](...args);\n        }\n\n        throw new Error(`You are trying to read from a consumer api that hasn't been initialized yet!`);\n    };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/@neos-project/neos-ui-extensibility/src/readFromConsumerApi.js","import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport {SelectBox, Button} from '@neos-project/react-ui-components';\nimport {connect} from 'react-redux';\nimport {selectors} from '@neos-project/neos-ui-redux-store';\nimport {neos} from '@neos-project/neos-ui-decorators';\nimport {$get} from 'plow-js';\nimport TestConfirmationDialog from './TestConfirmationDialog';\nimport ConfirmationDialog from './ConfirmationDialog';\n\nconst fetchSubscriptions = nodeType => fetch(`/newsletter/getSubscriptions?nodeType=${nodeType}`, {\n    credentials: 'include'\n}).then(response => response.json());\n\nconst sendNewsletter = (focusedNodeContextPath, subscription, isTest, email, dataSourceAdditionalArguments) => {\n    let sendEndpointUrl = isTest ? '/newsletter/testSend' : '/newsletter/send';\n    const csrfToken = document.getElementById('appContainer').dataset.csrfToken;\n    const data = new URLSearchParams();\n    data.set('node', focusedNodeContextPath.replace(/user-.+\\;/, 'live;'));\n    data.set('subscription', subscription);\n    data.set('__csrfToken', csrfToken);\n    if (isTest && email) {\n        data.set('email', email);\n    }\n    if (dataSourceAdditionalArguments) {\n        Object.keys(dataSourceAdditionalArguments).forEach(option => {\n            data.set('dataSourceAdditionalArguments[' + pair[0] + ']', dataSourceAdditionalArguments[option]);\n        });\n    }\n    return fetch(sendEndpointUrl, {\n            credentials: 'include',\n            method: 'POST',\n            body: data\n        })\n        .then(response => response.json());\n};\n\n@neos(globalRegistry => ({\n    i18nRegistry: globalRegistry.get('i18n')\n}))\n@connect(state => ({\n    focusedNodeContextPath: selectors.CR.Nodes.focusedNodePathSelector(state),\n    getNodeByContextPath: selectors.CR.Nodes.nodeByContextPath(state)\n}))\nexport default class NewsletterView extends Component {\n\n    static propTypes = {\n        focusedNodeContextPath: PropTypes.string,\n        getNodeByContextPath: PropTypes.func.isRequired\n    };\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            subscriptions: [],\n            selectedSubscription: null,\n            confirmationDialogIsOpen: false,\n            testConfirmationDialogIsOpen: false,\n            isError: null,\n            isSent: null\n        };\n        this.selectSubscription = this.selectSubscription.bind(this);\n        this.sendNewsletter = this.sendNewsletter.bind(this);\n        this.sendTestNewsletter = this.sendTestNewsletter.bind(this);\n        this.toggleConfirmationDialog = this.toggleConfirmationDialog.bind(this);\n        this.toggleTestConfirmationDialog = this.toggleTestConfirmationDialog.bind(this);\n    }\n\n    componentDidMount() {\n        const node = this.props.getNodeByContextPath(this.props.focusedNodeContextPath);\n        const nodeType = $get('nodeType', node);\n        if (nodeType) {\n            fetchSubscriptions(nodeType).then(json => this.setState({subscriptions: json}));\n        }\n    }\n\n    toggleConfirmationDialog(isOpen) {\n        this.setState({confirmationDialogIsOpen: isOpen})\n    }\n\n    toggleTestConfirmationDialog(isOpen) {\n        this.setState({testConfirmationDialogIsOpen: isOpen})\n    }\n\n    selectSubscription(value) {\n        this.setState({selectedSubscription: value});\n    }\n\n    sendNewsletter() {\n        const isTest = false;\n        sendNewsletter(this.props.focusedNodeContextPath, this.state.selectedSubscription, isTest)\n            .then(json => {\n                return json.status === 'success' ? this.setState({isSent: true}) : this.setState({isError: true});\n            })\n            .catch(() => this.setState({isError: true}));\n        this.toggleConfirmationDialog(false);\n    }\n\n    sendTestNewsletter(email) {\n        const isTest = true;\n        sendNewsletter(this.props.focusedNodeContextPath, this.state.selectedSubscription, isTest, email)\n            .then(json => {\n                return json.status === 'success' ? this.setState({isSent: true}) : this.setState({isError: true})\n            })\n            .catch(() => this.setState({isError: true}));\n        this.toggleTestConfirmationDialog(false);\n    }\n\n    render() {\n        return (\n            <div>\n                <SelectBox\n                    value={this.state.selectedSubscription}\n                    options={this.state.subscriptions}\n                    onValueChange={this.selectSubscription}\n                    />\n                <Button disabled={!this.state.selectedSubscription} style=\"brand\" onClick={() => this.toggleConfirmationDialog(true)}>{this.props.i18nRegistry.translate('Psmb.Newsletter:Main:js.send')}</Button>\n                <Button disabled={!this.state.selectedSubscription} style=\"clean\" onClick={() => this.toggleTestConfirmationDialog(true)}>{this.props.i18nRegistry.translate('Psmb.Newsletter:Main:js.test')}</Button>\n\n                {this.state.isError ? <div style={{marginTop: '16px', color: 'red'}}>{this.props.i18nRegistry.translate('Psmb.Newsletter:Main:js.error')}</div> : ''}\n                {this.state.isSent ? <div style={{marginTop: '16px', color: 'green'}}>{this.props.i18nRegistry.translate('Psmb.Newsletter:Main:js.sent')}</div> : ''}\n\n                <TestConfirmationDialog\n                    isOpen={this.state.testConfirmationDialogIsOpen}\n                    translate={this.props.i18nRegistry.translate.bind(this.props.i18nRegistry)}\n                    close={() => this.toggleTestConfirmationDialog(false)}\n                    send={this.sendTestNewsletter}\n                    />\n                <ConfirmationDialog\n                    isOpen={this.state.confirmationDialogIsOpen}\n                    translate={this.props.i18nRegistry.translate.bind(this.props.i18nRegistry)}\n                    close={() => this.toggleConfirmationDialog(false)}\n                    send={this.sendNewsletter}\n                    subscription={this.state.selectedSubscription}\n                    dataSourceAdditionalArguments={this.props.options && this.props.options.dataSourceAdditionalArguments}\n                    />\n            </div>\n        );\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/NewsletterView.js","import readFromConsumerApi from '../../../readFromConsumerApi';\n\nmodule.exports = readFromConsumerApi('vendor')().React;\n\n\n\n// WEBPACK FOOTER //\n// ./~/@neos-project/neos-ui-extensibility/src/shims/vendor/react/index.js","import readFromConsumerApi from '../../../readFromConsumerApi';\n\nmodule.exports = readFromConsumerApi('vendor')().PropTypes;\n\n\n\n// WEBPACK FOOTER //\n// ./~/@neos-project/neos-ui-extensibility/src/shims/vendor/prop-types/index.js","import readFromConsumerApi from '../../../readFromConsumerApi';\n\nmodule.exports = readFromConsumerApi('NeosProjectPackages')().ReactUiComponents;\n\n\n\n// WEBPACK FOOTER //\n// ./~/@neos-project/neos-ui-extensibility/src/shims/neosProjectPackages/react-ui-components/index.js","import readFromConsumerApi from '../../../readFromConsumerApi';\n\nmodule.exports = readFromConsumerApi('vendor')().reactRedux;\n\n\n\n// WEBPACK FOOTER //\n// ./~/@neos-project/neos-ui-extensibility/src/shims/vendor/react-redux/index.js","import readFromConsumerApi from '../../../readFromConsumerApi';\n\nmodule.exports = readFromConsumerApi('NeosProjectPackages')().NeosUiReduxStore;\n\n\n\n// WEBPACK FOOTER //\n// ./~/@neos-project/neos-ui-extensibility/src/shims/neosProjectPackages/neos-ui-redux-store/index.js","import readFromConsumerApi from '../../../readFromConsumerApi';\n\nmodule.exports = readFromConsumerApi('NeosProjectPackages')().NeosUiDecorators;\n\n\n\n// WEBPACK FOOTER //\n// ./~/@neos-project/neos-ui-extensibility/src/shims/neosProjectPackages/neos-ui-decorators/index.js","import readFromConsumerApi from '../../../readFromConsumerApi';\n\nmodule.exports = readFromConsumerApi('vendor')().plow;\n\n\n\n// WEBPACK FOOTER //\n// ./~/@neos-project/neos-ui-extensibility/src/shims/vendor/plow-js/index.js","import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport {SelectBox, Button, Dialog, TextInput} from '@neos-project/react-ui-components';\n\nexport default class TestConfirmationDialog extends Component {\n\n    static propTypes = {\n        isOpen: PropTypes.bool,\n        translate: PropTypes.func.isRequired,\n        close: PropTypes.func.isRequired,\n        send: PropTypes.func.isRequired\n    };\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            email: ''\n        };\n    }\n\n    render() {\n        const {isOpen, translate, close, send} = this.props;\n        return (\n            <Dialog\n                isOpen={isOpen}\n                title={translate('Psmb.Newsletter:Main:js.testConfirmationTitle')}\n                onRequestClose={close}\n                actions={[\n                    <Button onClick={close} style=\"clean\">{translate('Neos.Neos:Main:cancel')}</Button>,\n                    <Button disabled={!this.state.email.includes('@')} onClick={() => send(this.state.email)} style=\"brand\">{translate('Psmb.Newsletter:Main:js.send')}</Button>\n                ]}\n                >\n                <div style={{padding: '16px'}}>\n                    {translate('Psmb.Newsletter:Main:js.testEmailLabel')}\n                    <TextInput\n                        onChange={email => this.setState({email})}\n                        value={this.state.email}\n                        />\n                </div>\n            </Dialog>\n        );\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/TestConfirmationDialog.js","import React, {PureComponent} from 'react';\nimport PropTypes from 'prop-types';\nimport {Button, Dialog} from '@neos-project/react-ui-components';\n\nclass ConfirmationDialog extends PureComponent {\n    static propTypes = {\n        isOpen: PropTypes.bool,\n        translate: PropTypes.func.isRequired,\n        close: PropTypes.func.isRequired,\n        send: PropTypes.func.isRequired,\n        subscription: PropTypes.string.isRequired,\n        dataSourceAdditionalArguments: PropTypes.object\n    };\n\n    state = {\n        isLoading: false,\n        subscribers: []\n    };\n\n    componentDidUpdate(prevProps) {\n        if (this.props.subscription !== prevProps.subscription || (prevProps.isOpen === false && this.props.isOpen === true)) {\n            this.fetchPreview();\n        }\n    }\n\n    fetchPreview() {\n        if (this.props.subscription && this.props.isOpen) {\n            this.setState({isLoading: true, subscribers: []});\n            const dataSourceAdditionalArguments = this.props.dataSourceAdditionalArguments;\n            const data = new URLSearchParams();\n            if (dataSourceAdditionalArguments) {\n                Object.keys(dataSourceAdditionalArguments).forEach(option => {\n                    data.set('dataSourceAdditionalArguments[' + option + ']', dataSourceAdditionalArguments[option]);\n                });\n            }\n            fetch(`/newsletter/preview?subscription=${this.props.subscription}&${data.toString()}`, {\n                credentials: 'include'\n            })\n                .then(response => response.json())\n                .then(subscribers => {\n                    this.setState({subscribers, isLoading: false});\n                });\n        }\n    }\n    render() {\n        const {isOpen, translate, close, send} = this.props;\n\n        const keys = this.state.subscribers[0] ? Object.keys(this.state.subscribers[0]) : [];\n        return (\n            <Dialog\n                isOpen={isOpen}\n                title={translate('Psmb.Newsletter:Main:js.confirmationTitle')}\n                onRequestClose={close}\n                actions={[\n                    <Button onClick={close} style=\"clean\">{translate('Neos.Neos:Main:cancel')}</Button>,\n                    <Button onClick={send} style=\"brand\">{translate('Psmb.Newsletter:Main:js.send')}</Button>\n                ]}\n                >\n                <div style={{padding: '16px'}}>\n                    <div>{translate('Psmb.Newsletter:Main:js.confirmationDescription')}</div>\n                    {this.state.isLoading ? translate('Psmb.Newsletter:Main:js.loading') : (\n                        <div>\n                            <div style={{padding: '16px 0'}}>{translate('Psmb.Newsletter:Main:js.recepients')}: <strong>{this.state.subscribers.length}</strong></div>\n                            <table>\n                                <tr>{keys.map(key => <th>{key}</th>)}</tr>\n                                {this.state.subscribers.map(subscriber => {\n                                    return <tr>{keys.map(key => <td>{subscriber[key]}</td>)}</tr>;\n                                })}\n                            </table>\n                        </div>\n                    )}\n                </div>\n            </Dialog>\n        );\n    }\n};\n\nexport default ConfirmationDialog;\n\n\n\n// WEBPACK FOOTER //\n// ./src/ConfirmationDialog.js"],"sourceRoot":""}